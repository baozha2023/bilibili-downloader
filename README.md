# Bilibili Downloader (哔哩哔哩视频下载器)

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Python](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)

一个简洁、易用的B站视频下载工具，支持图形界面(GUI)和命令行(CLI)操作。

![Screenshot](resource/screenshot.png) (如果有截图请替换)

## ✨ 功能特性

* **高清下载**：支持下载1080P、4K等高清视频（需登录大会员账号）。
* **视频合并**：自动合并视频流和音频流，输出完整的MP4文件。
* **断点续传**：支持网络中断后的断点续传。
* **热门视频**：查看并下载B站热门视频。
* **去水印**：(实验性) 支持去除视频右上角水印。
* **多平台**：支持Windows、Linux和macOS（需自行配置ffmpeg）。
* **双模式**：提供直观的GUI界面和高效的命令行模式。
* **模块化设计**：v2.0 采用全新的模块化架构，运行更稳定，维护更方便。

## 📦 安装与运行

### 依赖环境

* Python 3.8 或更高版本
* ffmpeg (用于视频合并和处理)

### 安装步骤

1. 克隆或下载本项目代码。
2. 安装Python依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 确保 `ffmpeg` 可用：
    * Windows: 将 `ffmpeg.exe` 放入项目根目录下的 `ffmpeg/` 文件夹中，或添加到系统环境变量 PATH 中。
    * Linux/macOS: 使用包管理器安装 (e.g., `apt install ffmpeg` or `brew install ffmpeg`)。

### 运行程序

**启动图形界面 (GUI):**

```bash
python main.py
```

**使用命令行 (CLI):**

```bash
# 下载指定视频
python main.py -d BV1xx411c7mD

# 爬取热门视频
python main.py -p --pages 3
```

## 🛠️ 开发构建

本项目使用 PyInstaller 进行打包。

```bash
python build.py
```

构建完成后，可执行文件将位于 `dist/bilibili_downloader/` 目录。

## 📝 版本历史

### v2.5 (2025-11-30)

* **优化**: 登录弹窗优化，简化提示信息，界面更清爽。
* **修复**: 修复了文件已存在时重复下载可能导致的报错问题。
* **美化**: 重写警告弹窗，采用圆角和主题色，统一B站风格。
* **体验**: 增大常用按钮字号，操作更便捷。
* **增强**: 优化去水印算法，自动适配更多分辨率，效果更自然。

### v2.4 (2025-11-30)

* **修复**: 修复了打包过程中 `subprocess` 找不到文件的Bug。
* **UI**: 全局字体增大8px，提升阅读体验。
* **优化**: 登录弹窗移除遮挡二维码的文字组件，优化布局。
* **美化**: 界面细节进一步美化，增强B站风格（圆角、过渡动画）。
* **结构**: 项目结构清理与优化。

### v2.3 (2025-11-30)

* **优化**: 优化下载进度条逻辑，不合并时自动隐藏合并进度条，界面更简洁。
* **体验**: 设置变更实时响应，勾选下载选项后立即在界面反馈。
* **UI**: 全局字体尺寸增大，提升高分辨率屏幕下的阅读体验。
* **美化**: 登录弹窗尺寸增大，布局优化，增强B站风格。
* **重构**: 代码结构优化，清理冗余代码，提升稳定性。

### v2.2 (2025-11-30)

* **新增**: 视频下载界面动态显示评论、弹幕下载进度及合并进度。
* **新增**: 登录弹窗增加“保存账号信息”勾选框，支持自动登录或退出清除信息。
* **优化**: 登录按钮增加鼠标悬停手型交互，提升体验。
* **优化**: 智能去水印算法，根据分辨率自动适配水印位置和大小。
* **美化**: UI界面全面升级，增加过渡动画，贴近B站设计风格。
* **重构**: 优化项目结构，清理冗余代码。

### v2.1 (2025-11-30)

* **界面**: 全新设计的登录弹窗，采用卡片式布局和B站主题色，更加美观。
* **优化**: 账号界面布局调整，移除旧版会员特权区域，扩大内容展示空间。
* **体验**: 增加界面过渡动画，提升交互流畅度。
* **功能**: 退出软件时自动清除登录信息，增强隐私保护。
* **细节**: 优化下载速度显示，精确保留两位小数。
* **提示**: 增大启动弹窗的字体，提升阅读体验。

### v2.0 (2025-11-30)

* **重构**: 全面重构项目结构，功能模块化（DownloadTab, PopularTab, AccountTab, SettingsTab），提升代码可维护性和运行稳定性。
* **优化**: 登录弹窗二维码显示区域修复，确保正方形显示，修复`AttributeError` bug。
* **优化**: 移除界面冗余描述（如批量下载），更正会员特权描述。
* **优化**: 下载流程优化，进度条显示更加准确。
* **增强**: 独立打包脚本更新，支持一键生成免环境Windows可执行文件。

### v1.10 (2025-11-30)

* **优化**: 登录弹窗二维码显示区域严格调整为正方形，修复变形bug。
* **优化**: 移除登录界面“保存登录状态”复选框，默认自动保存。
* **优化**: 重新设计设置界面布局，更加清晰美观。
* **优化**: 增强视频下载取消逻辑，确保资源释放和残留文件清理。
* **重构**: 优化项目结构，清理冗余代码。

### v1.9 (2025-11-30)

* **优化**: 登录弹窗二维码显示区域调整为正方形，防止变形。
* **优化**: 视频下载取消逻辑，支持释放资源并删除残留文件。
* **优化**: 设置界面布局调整，移除冗余描述。
* **新增**: 登录用户可查看观看历史记录，并支持双击直接下载。
* **新增**: 应用程序图标支持。

### v1.8 (2025-11-30)

* **修复**: 登录后分辨率选项不显示1080p及大会员4K选项的问题。
* **优化**: 调整登录弹窗大小，解决二维码缩小变形的问题。
* **优化**: 调整启动弹窗大小，提升阅读体验。
* **安全**: 新增退出软件时自动清除登录信息的功能。
* **优化**: 确保所有设置选项正确生效。

### v1.7 (2025-11-30)

* **优化**: 设置界面布局重构，移除冗余选项。
* **新增**: 启动弹窗公告，显示版本更新内容。
* **新增**: 智能分辨率选择，根据登录状态和权益自动显示可用画质。
* **修复**: 收藏夹列表时间显示问题。
* **优化**: 移除了界面顶部的冗余标题栏。

### v1.6 (2025-11-30)

* **新增**: 支持下载弹幕（XML/JSON）和评论（JSON）。
* **优化**: 控制台日志输出更加简洁直观。
* **修复**: 登录二维码生成失败的问题。
* **修复**: 部分视频去水印时可能出现的计算错误。
* **增强**: 完善了核心功能的单元测试覆盖。

### v1.5 (2025-11-30)

* **新增**: 完整的去水印功能 (自动探测分辨率并应用delogo滤镜)。
* **优化**: 用户登录后自动下载最高画质 (4K/1080P+)。
* **修复**: 合并后删除原文件选项无效的问题。
* **修复**: 重新下载已存在视频时的报错问题。
* **重构**: 视频处理模块 (Processor) 独立并增强稳定性。
* **优化**: 设置选项实时生效，无需重启。

### v1.4 (2025-11-30)

* **重构**: 核心代码模块化 (Network, API, Downloader, Processor)。
* **新增**: 实验性去水印功能。
* **优化**: UI响应速度和错误处理。
* **移除**: 废弃的搜索和用户信息查询功能。

### v1.3 (2025-2-21)

* 移除搜索功能，精简界面。

## ⚠️ 免责声明

本项目仅供学习和个人使用，请勿用于商业用途或侵犯他人版权。下载的视频版权归原作者所有。
